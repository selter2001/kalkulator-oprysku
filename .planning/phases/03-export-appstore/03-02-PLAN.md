---
phase: 03-export-appstore
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - SprayCalculator/Views/AboutView.swift
  - SprayCalculator/SettingsView.swift
  - SprayCalculator.xcodeproj/project.pbxproj
  - README.md
  - LICENSE
autonomous: false

must_haves:
  truths:
    - "User can open an About screen from Settings showing author name, app version, and contact link"
    - "Repository contains a professional README.md with build instructions and screenshot placeholders"
    - "Repository contains an MIT LICENSE file with copyright 2026 Wojciech Olszak"
    - "Project builds with zero Xcode warnings and correct Bundle Identifier com.wojciecholszak.kalkulatoroprysku"
  artifacts:
    - path: "SprayCalculator/Views/AboutView.swift"
      provides: "About screen with author, version, contact"
      contains: "AboutView"
    - path: "SprayCalculator/SettingsView.swift"
      provides: "NavigationLink to AboutView"
      contains: "AboutView"
    - path: "README.md"
      provides: "Professional README with build instructions"
      contains: "xcodebuild"
    - path: "LICENSE"
      provides: "MIT License"
      contains: "MIT License"
    - path: "SprayCalculator.xcodeproj/project.pbxproj"
      provides: "Correct Bundle ID com.wojciecholszak.kalkulatoroprysku"
      contains: "com.wojciecholszak.kalkulatoroprysku"
  key_links:
    - from: "SprayCalculator/SettingsView.swift"
      to: "SprayCalculator/Views/AboutView.swift"
      via: "NavigationLink to AboutView"
      pattern: "NavigationLink.*AboutView"
    - from: "SprayCalculator/Views/AboutView.swift"
      to: "Bundle.main"
      via: "Reads CFBundleShortVersionString for version display"
      pattern: "CFBundleShortVersionString"
---

<objective>
Create the About view, add it to Settings, write README.md and MIT LICENSE, fix the Bundle Identifier, and verify zero Xcode warnings. Then human-verify the complete Phase 3 delivery on simulator.

Purpose: Delivers requirements EXP-02 (About view), EXP-03 (README + LICENSE), and EXP-04 (zero warnings + correct Bundle ID). Completes the entire Phase 3.
Output: AboutView.swift, updated SettingsView.swift, README.md, LICENSE, fixed Bundle ID in pbxproj.
</objective>

<execution_context>
@/Users/wojciecholszak/.claude/get-shit-done/workflows/execute-plan.md
@/Users/wojciecholszak/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-export-appstore/03-RESEARCH.md
@.planning/phases/03-export-appstore/03-01-SUMMARY.md

@SprayCalculator/SettingsView.swift
@SprayCalculator/LocalizationManager.swift
@SprayCalculator/SprayCalculatorApp.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AboutView, add to Settings, fix Bundle ID, write README + LICENSE</name>
  <files>
    SprayCalculator/Views/AboutView.swift
    SprayCalculator/SettingsView.swift
    SprayCalculator.xcodeproj/project.pbxproj
    README.md
    LICENSE
  </files>
  <action>
1. Create `SprayCalculator/Views/AboutView.swift`:
   - `struct AboutView: View` with `@Environment(LocalizationManager.self) private var localization`
   - Private computed properties:
     - `appVersion`: `Bundle.main.infoDictionary?["CFBundleShortVersionString"] as? String ?? "1.0"`
     - `buildNumber`: `Bundle.main.infoDictionary?["CFBundleVersion"] as? String ?? "1"`
   - Body: List with .insetGrouped style, scrollContentBackground(.hidden), AppGradients.backgroundGradient background
   - Section 1 (app info):
     - App name row: Label(localization.appTitle, systemImage: "leaf.fill") with Color(.primaryGreen) icon
     - Version row: HStack with localization.version label + "\(appVersion) (\(buildNumber))" value in Color(.textSecondary)
     - iOS row: HStack with "iOS" label + "17.0+" value in Color(.textSecondary)
   - Section 2 (author):
     - Author row: Label("Wojciech Olszak", systemImage: "person.fill")
     - Contact row: Link to GitHub repo URL https://github.com/selter2001/kalkulator-oprysku with Label("GitHub", systemImage: "link") and .foregroundStyle(Color(.primaryGreen))
   - Use `Color(.backgroundCard)` for listRowBackground (consistent with SettingsView)
   - Use `Color(.textSecondary)` for section headers
   - NavigationTitle: localization.about
   - Add #Preview at bottom

2. Update `SprayCalculator/SettingsView.swift`:
   - Add a third Section AFTER the "App Info Section" containing a NavigationLink to AboutView():
     ```swift
     Section {
         NavigationLink {
             AboutView()
         } label: {
             Label(localization.about, systemImage: "info.circle")
                 .foregroundStyle(Color(.textPrimary))
         }
     } header: {
         // No header needed, or empty
     }
     .listRowBackground(Color(.backgroundCard))
     ```
   - This leverages the existing NavigationStack in ContentView's settings gear icon

3. Fix Bundle Identifier in `SprayCalculator.xcodeproj/project.pbxproj`:
   - Replace ALL occurrences of `com.spraycalculator.app` with `com.wojciecholszak.kalkulatoroprysku`
   - There are exactly 2 occurrences (Debug and Release configurations) per grep results
   - Use sed or direct file editing to change both

4. Add AboutView.swift to the Xcode project file (project.pbxproj) so it compiles. Add file reference to PBXFileReference section, add to PBXBuildFile section, and add to the Views PBXGroup (created by Plan 01).

5. Create `README.md` in the repository root (at the same level as SprayCalculator.xcodeproj):
   - Title: "Kalkulator Oprysku"
   - Subtitle in Polish: professional spray calculator for farmers
   - Features list (PL): surface area calculation, per-tank composition, PDF export, history, favorites, PL/EN localization, dark mode, Dynamic Type
   - Screenshots section with placeholder comments `<!-- TODO: Add screenshots -->`
   - Requirements: iOS 17.0+, Xcode 15.0+
   - Build instructions:
     ```
     git clone https://github.com/selter2001/kalkulator-oprysku.git
     cd kalkulator-oprysku
     open SprayCalculator.xcodeproj
     ```
     Then: Select target device, Cmd+R to build and run
   - Author: Wojciech Olszak
   - License: MIT (see LICENSE file)

6. Create `LICENSE` file in the repository root:
   - Standard MIT License text
   - Copyright (c) 2026 Wojciech Olszak
   - Use exact template from 03-RESEARCH.md "MIT LICENSE File Content"

7. Check for Xcode warnings: build the project and verify zero warnings in the output. If any warnings exist, fix them (common sources: deprecated API usage, unused variables, missing return types).
  </action>
  <verify>
    - `grep "com.wojciecholszak.kalkulatoroprysku" SprayCalculator.xcodeproj/project.pbxproj | wc -l` returns 2 (both Debug and Release)
    - `grep "com.spraycalculator.app" SprayCalculator.xcodeproj/project.pbxproj | wc -l` returns 0 (old ID fully replaced)
    - `grep "AboutView" SprayCalculator/SettingsView.swift` returns a match
    - `grep "CFBundleShortVersionString" SprayCalculator/Views/AboutView.swift` returns a match
    - `test -f README.md && echo "EXISTS"` returns EXISTS
    - `test -f LICENSE && echo "EXISTS"` returns EXISTS
    - `grep "MIT License" LICENSE` returns a match
    - `grep "Wojciech Olszak" LICENSE` returns a match
    - `xcodebuild -project SprayCalculator.xcodeproj -scheme SprayCalculator -destination 'platform=iOS Simulator,name=iPhone 16' build 2>&1 | grep -E "warning:|error:" | head -10` -- zero warnings and zero errors
  </verify>
  <done>
    AboutView shows author, version, GitHub link. Settings has NavigationLink to About. Bundle ID is com.wojciecholszak.kalkulatoroprysku in both Debug and Release. README.md has features, build instructions, author info. LICENSE is MIT with correct copyright. Project builds with zero warnings.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete Phase 3 delivery: PDF export with ShareLink, About view accessible from Settings, README.md, MIT LICENSE, correct Bundle ID, zero warnings.
  </what-built>
  <how-to-verify>
    1. Open the app in Simulator (or physical device if available)
    2. Enter test values: Field area = 10 ha, Spray rate = 200 l/ha, Chemical rate = 2 l/ha, Tank capacity = 500 l
    3. Tap "Oblicz" -- verify results appear with per-tank breakdown
    4. Scroll down past results -- verify green "Eksportuj PDF" button is visible
    5. Tap "Eksportuj PDF" -- verify iOS share sheet appears with a PDF file
    6. Preview the PDF -- verify it contains:
       - App title and date
       - Input parameters (field area, spray rate, chemical rate, tank capacity)
       - Results (working fluid, total chemical, tank fills)
       - Per-tank composition (water + chemical for full and partial tanks)
       - Footer signature "Wygenerowano w aplikacji autorstwa Wojciecha Olszaka"
    7. Switch device to DARK MODE -- repeat steps 2-6 -- verify PDF still has black text on white background (critical!)
    8. Tap gear icon (Settings) -- verify "O aplikacji" link is visible
    9. Tap "O aplikacji" -- verify: author name "Wojciech Olszak", version number, GitHub link
    10. Switch language to English -- verify "Export PDF", "About" labels are in English
    11. Check Xcode build -- verify zero warnings in Issue Navigator
    12. Verify README.md exists at repository root with build instructions
    13. Verify LICENSE file exists at repository root with MIT license
  </how-to-verify>
  <resume-signal>Type "approved" if everything works, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
- Full project builds with zero warnings: `xcodebuild -project SprayCalculator.xcodeproj -scheme SprayCalculator -destination 'platform=iOS Simulator,name=iPhone 16' build 2>&1 | grep -c "warning:"` returns 0
- Bundle ID correct: `grep "PRODUCT_BUNDLE_IDENTIFIER" SprayCalculator.xcodeproj/project.pbxproj` shows com.wojciecholszak.kalkulatoroprysku
- All EXP requirements covered:
  - EXP-01: ShareLink + PDFExportService + PDFContentView (Plan 01)
  - EXP-02: AboutView accessible from SettingsView
  - EXP-03: README.md + LICENSE at repository root
  - EXP-04: Zero warnings + correct Bundle ID
</verification>

<success_criteria>
1. About view shows author name "Wojciech Olszak", app version from Bundle, and GitHub contact link
2. Settings view has a NavigationLink to the About view
3. README.md exists with features list, build instructions, and screenshot placeholders
4. LICENSE file contains MIT license with "Copyright (c) 2026 Wojciech Olszak"
5. Bundle ID is com.wojciecholszak.kalkulatoroprysku in both Debug and Release
6. Project builds with zero Xcode warnings
7. Human verification approves the complete Phase 3 delivery
</success_criteria>

<output>
After completion, create `.planning/phases/03-export-appstore/03-02-SUMMARY.md`
</output>
